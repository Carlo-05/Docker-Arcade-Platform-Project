## **1.	Login AWS access key into your ubuntu terminal in Visual Studio Code with this command:**

```bash
aws configure
``` 

<div style="text-align: left;">
<img src="https://github.com/Carlo-05/Terraform-WebApp-RDS-Vault-Project/blob/main/Other%20documents/pictures/First%20step/1..png?raw=true" alt="First Step" style="width: 45%; height: auto;">
</div> 

#### _Note: [Link](https://docs.aws.amazon.com/cli/latest/reference/configure/) for “aws configure” documentation._

## **2.	Generated AWS key pair in local terminal**
-	Create key pair to enable password-less and encrypted SSH authentication.
-	We need this key pair in order for Github Action to connect via ssh connection to EC2 instance
-	Input this command to generate key and save the private key in the local machine

    ```bash
    aws ec2 create-key-pair --key-name <key-name> --region us-west-2 --query 'KeyMaterial' --output text > <key-name>.pem
    ``` 

-	Check the generated key using this command:

    ```bash
    aws ec2 describe-key-pairs --region us-west-2 --query 'KeyPairs[*].KeyName' --output table
    ```

-   Check the private key in your local machine. The should be in the current directory:
    
    ```bash
    ls
    ```

    <div style="text-align: left;">
    <img src="https://github.com/Carlo-05/Docker-Arcade-Platform-Project/blob/main/documents/pictures/first_step_001.png?raw=true" alt="First Step" style="width: 80%; height: auto;">
    </div> 
 
    #### _Note: Take note of the region used. The project should be region specific. In my case, I will deploy the project in us-west-2 so the key is in this region._
## **3.	Create S3 bucket.**
-	The dev backend will use this bucket to store tfstate file.
-	To create s3 bucket , execute this command:

    ```bash
    aws s3api create-bucket --bucket <your-s3-bucket> --region us-west-2 --create-bucket-configuration LocationConstraint=us-west-2
    ```
    <div style="text-align: left;">
    <img src="https://github.com/Carlo-05/Terraform-WebApp-RDS-Vault-Project/blob/main/Other%20documents/pictures/First%20step/6..png?raw=true" alt="First Step" style="width: 80%; height: auto;">
    </div>

    ##### _Note: You can view your s3 bucket in AWS console too._
## **4.	Enable versioning in s3 bucket.**
-	Prevent accidental overwrites and deletions of file by retaining previous versions.
-	To enable versioning, input this command:

    ```bash
    aws s3api put-bucket-versioning --bucket <your-s3-bucket> --versioning-configuration Status=Enabled
    ```

-	Check the status of your s3 bucket if the versioning is activated:

    ```bash
    aws s3api get-bucket-versioning --bucket <your-s3-bucket>
    ```
    <div style="text-align: left;">
    <img src="https://github.com/Carlo-05/Terraform-WebApp-RDS-Vault-Project/blob/main/Other%20documents/pictures/First%20step/7..png?raw=true" alt="First Step" style="width: 80%; height: auto;">
    </div>

## **5.	Create bucket policy for the bucket.**
-	Create s3 bucket policy.

    ```bash
    vim s3policy.json
    ```

-   Paste the code below.

    ```bash
    {
        "Version": "2012-10-17",
        "Statement": [
            {
                "Effect": "Allow",
                "Principal": {
                    "AWS": "arn:aws:iam::<account-id>:user/<administrator-username"
                },
                "Action": "s3:*",
                "Resource": [
                    "arn:aws:s3:::crbb-wrvp--212529",
                    "arn:aws:s3:::crbb-wrvp--212529/*"
                ]
            }    
        ]
    }

    ```
-   Make sure to edit the user arn and s3 bucket name, then save.
    <div style="text-align: left;">
    <img src="https://github.com/Carlo-05/Docker-Arcade-Platform-Project/blob/main/documents/pictures/first_step_002.png?raw=true" alt="First Step" style="width: 50%; height: auto;">
    </div>


## **6.	Attached bucket policy to the s3 bucket.**
-	Attached the s3policy.json to s3 bucket. Make sure the file is in your current directory:

    ```bash
    aws s3api put-bucket-policy --bucket <your-s3-bucket>  --policy file://s3policy.json
    aws s3api get-bucket-policy --bucket <your-s3-bucket>
    ```
    <div style="text-align: left;">
    <img src="https://github.com/Carlo-05/Docker-Arcade-Platform-Project/blob/main/documents/pictures/first_step_003.png?raw=true" alt="First Step" style="width: 80%; height: auto;">
    </div>


